{"version":3,"sources":["webpack:///./src/page/curd/index.vue?8483","webpack:///src/page/curd/index.vue","webpack:///./src/page/curd/index.vue?a5e1","webpack:///./src/page/curd/index.vue","webpack:///./src/page/curd/index.js","webpack:///./src/page/curd/index.vue?59ad"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","handleCreateButtonClick","_v","tableLoading","columns","data","scopedSlots","_u","_l","column","key","slot","fn","ref","row","index","field","i","$event","handleButtonEvent","total","handlePageNumberChange","handlePageSizeChange","model","value","callback","$$v","editDialogOpeon","expression","editFormFields","editModel","handleSave","staticRenderFns","loading","pageConfig","pageSize","pageNumber","computed","mounted","getPageConfig","pageId","methods","getTableData","getList","params","then","type","status","name","editButtonClick","deleteButtonClick","deleteRequest","toBlackButtonClick","toBlackRequest","toWhiteButtonClick","toWhiteRequest","$refs","FormGenerator","submit","addRequest","add","res","errno","editRequest","edit","del","toBlack","toWhite","component"],"mappings":"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","file":"static/js/curd.ceeb0c65.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.loading)?_c('div',{staticClass:\"page-curd-loading\"},[_c('Spin',{staticClass:\"page-curd-loading-spin\",attrs:{\"size\":\"large\"}})],1):_c('div',{staticClass:\"page-curd\"},[_c('h3',{staticClass:\"page-curd-header\"},[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleCreateButtonClick}},[_vm._v(\"创建用户\")])],1),_c('Table',{staticClass:\"page-curd-table\",attrs:{\"loading\":_vm.tableLoading,\"columns\":_vm.columns,\"data\":_vm.data},scopedSlots:_vm._u([_vm._l((_vm.columns),function(column){return {key:column.slot,fn:function(ref){\nvar row = ref.row;\nvar index = ref.index;\nreturn [_c('Form',{key:column.slot,attrs:{\"model\":row}},_vm._l((column.formFields),function(field,i){return _c('FieldGenerator',{key:i,attrs:{\"field\":field},on:{\"on-button-event\":function($event){return _vm.handleButtonEvent($event, row, index)}}})}),1)]}}})],null,true)}),_c('div',{staticClass:\"page-curd-pagenation\"},[_c('Page',{attrs:{\"total\":_vm.total,\"show-total\":\"\",\"show-elevator\":\"\",\"show-sizer\":\"\"},on:{\"on-change\":function($event){return _vm.handlePageNumberChange($event)},\"on-page-size-change\":function($event){return _vm.handlePageSizeChange($event)}}})],1),_c('Modal',{attrs:{\"title\":\"编辑\",\"footer-hide\":\"\"},model:{value:(_vm.editDialogOpeon),callback:function ($$v) {_vm.editDialogOpeon=$$v},expression:\"editDialogOpeon\"}},[_c('FormGenerator',{ref:\"FormGenerator\",attrs:{\"fields\":_vm.editFormFields,\"model\":_vm.editModel},on:{\"on-submit\":_vm.handleSave}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div v-if=\"loading\" class=\"page-curd-loading\">\n    <Spin class=\"page-curd-loading-spin\" size=\"large\" />\n  </div>\n  <div v-else class=\"page-curd\">\n    <h3 class=\"page-curd-header\">\n      <Button type=\"primary\" @click=\"handleCreateButtonClick\">创建用户</Button>\n    </h3>\n    <Table\n      class=\"page-curd-table\"\n      :loading=\"tableLoading\"\n      :columns=\"columns\"\n      :data=\"data\"\n    >\n      <template\n        v-for=\"column in columns\"\n        :slot=\"column.slot\"\n        slot-scope=\"{ row, index }\"\n      >\n        <Form :key=\"column.slot\" :model=\"row\">\n          <FieldGenerator\n            v-for=\"(field, i) in column.formFields\"\n            :key=\"i\"\n            :field=\"field\"\n            @on-button-event=\"handleButtonEvent($event, row, index)\"\n          />\n        </Form>\n      </template>\n    </Table>\n    <div class=\"page-curd-pagenation\">\n      <Page\n        :total=\"total\"\n        show-total\n        show-elevator\n        show-sizer\n        @on-change=\"handlePageNumberChange($event)\"\n        @on-page-size-change=\"handlePageSizeChange($event)\"\n      />\n    </div>\n    <Modal v-model=\"editDialogOpeon\" title=\"编辑\" footer-hide>\n      <FormGenerator\n        ref=\"FormGenerator\"\n        :fields=\"editFormFields\"\n        :model=\"editModel\"\n        @on-submit=\"handleSave\"\n      />\n    </Modal>\n  </div>\n</template>\n<script>\nimport services from \"@/service\";\nconst { getPageConfig, getList, add, edit, del, toBlack, toWhite } = services[\n  \"curd\"\n];\nexport default {\n  data() {\n    return {\n      loading: true,\n      tableLoading: true,\n      data: [],\n      editModel: {},\n      pageConfig: {},\n      editDialogOpeon: false,\n      pageSize: 10,\n      pageNumber: 1,\n      total: 0\n    };\n  },\n  computed: {\n    columns() {\n      return this.pageConfig.columns;\n    },\n    editFormFields() {\n      return this.pageConfig.editFormFields;\n    }\n  },\n  mounted() {\n    const { pageId } = this.$route.params;\n    getPageConfig({\n      pageId\n    }).then(res => {\n      this.pageConfig = res.data;\n      this.loading = false;\n      this.getTableData();\n    });\n  },\n  methods: {\n    getTableData() {\n      this.tableLoading = true;\n      const { pageId } = this.$route.params;\n      const params = {\n        pageSize: this.pageSize,\n        pageNumber: this.pageNumber,\n        pageId\n      };\n      getList(params).then(res => {\n        const { list, pageSize, pageNumber, total } = res.data;\n        this.data = list || [];\n        this.pageSize = pageSize || this.pageSize;\n        this.pageNumber = pageNumber || this.pageNumber;\n        this.total = total || this.total;\n        this.tableLoading = false;\n      });\n    },\n\n    handlePageNumberChange(pageNumber) {\n      this.pageNumber = pageNumber;\n      this.getTableData();\n    },\n\n    handlePageSizeChange(pageSize) {\n      this.pageSize = pageSize;\n      this.getTableData();\n    },\n\n    handleCreateButtonClick() {\n      this.editModel = {\n        type: \"add\",\n        // 初始化用户状态，通常这个值是后端初始化\n        status: \"1\"\n      };\n      this.editDialogOpeon = true;\n    },\n\n    handleButtonEvent($event, row, index) {\n      this[$event.name](row, index);\n    },\n\n    editButtonClick(row, index) {\n      // eslint-disable-next-line no-console\n      this.editModel = row;\n      this.editModel.index = index;\n      this.editDialogOpeon = true;\n    },\n\n    deleteButtonClick(row) {\n      this.deleteRequest(row);\n    },\n\n    toBlackButtonClick(row) {\n      this.toBlackRequest(row);\n    },\n\n    toWhiteButtonClick(row) {\n      this.toWhiteRequest(row);\n    },\n\n    handleSave() {\n      this.$refs.FormGenerator.submit()\n        .then(() => {\n          // 新增用户\n          if (this.editModel.type === \"add\") {\n            this.editModel.type = \"\";\n            this.addRequest(this.editModel);\n            this.getTableData();\n            return;\n          }\n          // 编辑\n          this.editRequest(this.editModel);\n        })\n        .catch(err => {\n          // eslint-disable-next-line no-console\n          console.log(err);\n        });\n    },\n\n    addRequest(params) {\n      add(params).then(res => {\n        if (+res.errno === 0) {\n          this.$Message.info(\"Add Success!\");\n          this.editDialogOpeon = false;\n          this.getTableData();\n        } else {\n          this.$Message.error(\"Add Failed!\");\n        }\n      });\n    },\n\n    editRequest(params) {\n      edit(params).then(res => {\n        if (+res.errno === 0) {\n          this.$Message.info(\"Edit Success!\");\n          this.editDialogOpeon = false;\n          this.getTableData();\n        } else {\n          this.$Message.error(\"Edit Failed!\");\n        }\n      });\n    },\n\n    deleteRequest(params) {\n      del(params).then(res => {\n        if (+res.errno === 0) {\n          this.$Message.info(\"Delete Success!\");\n          this.getTableData();\n        } else {\n          this.$Message.error(\"Delete Failed!\");\n        }\n      });\n    },\n\n    toBlackRequest(params) {\n      toBlack(params).then(res => {\n        if (+res.errno === 0) {\n          this.$Message.info(\"ToBlack Success!\");\n          this.getTableData();\n        } else {\n          this.$Message.error(\"ToBlack Failed!\");\n        }\n      });\n    },\n\n    toWhiteRequest(params) {\n      toWhite(params).then(res => {\n        if (+res.errno === 0) {\n          this.$Message.info(\"toWhite Success!\");\n          this.getTableData();\n        } else {\n          this.$Message.error(\"toWhite Failed!\");\n        }\n      });\n    }\n  }\n};\n</script>\n<style lang=\"less\">\n.page-curd {\n  &-loading {\n    text-align: center;\n    padding: 140px;\n    &-spin {\n      display: inline-block;\n    }\n  }\n  &-header {\n    margin-bottom: 10px;\n    text-align: right;\n  }\n  &-table {\n    .ivu-form-item {\n      margin-bottom: 0;\n    }\n  }\n  .ivu-table,\n  .ivu-table-wrapper,\n  .ivu-table-cell {\n    overflow: visible;\n  }\n  .ivu-poptip-confirm {\n    text-align: left;\n  }\n\n  &-pagenation {\n    margin-top: 20px;\n    text-align: right;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=08ce2fef&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import index from \"./index.vue\";\n\nexport default index;\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=less&\""],"sourceRoot":""}