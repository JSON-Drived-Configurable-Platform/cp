(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["curd"],{"597c":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.loading?a("div",{staticClass:"page-curd-loading"},[a("Spin",{staticClass:"page-curd-loading-spin",attrs:{size:"large"}})],1):a("div",{staticClass:"page-curd"},[a("h3",{staticClass:"page-curd-header"},[a("Button",{attrs:{type:"primary"},on:{click:e.handleCreateButtonClick}},[e._v("创建用户")])],1),a("Table",{staticClass:"page-curd-table",attrs:{loading:e.tableLoading,columns:e.columns,data:e.data},scopedSlots:e._u([e._l(e.columns,function(t){return{key:t.slot,fn:function(n){var i=n.row,o=n.index;return[a("Form",{key:t.slot,attrs:{model:i}},e._l(t.formFields,function(t,n){return a("FieldGenerator",{key:n,attrs:{field:t},on:{"on-button-event":function(t){return e.handleButtonEvent(t,i,o)}}})}),1)]}}})],null,!0)}),a("div",{staticClass:"page-curd-pagenation"},[a("Page",{attrs:{total:e.total,"show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":function(t){return e.handlePageNumberChange(t)},"on-page-size-change":function(t){return e.handlePageSizeChange(t)}}})],1),a("Modal",{attrs:{title:"编辑","footer-hide":""},model:{value:e.editDialogOpeon,callback:function(t){e.editDialogOpeon=t},expression:"editDialogOpeon"}},[a("FormGenerator",{ref:"FormGenerator",attrs:{fields:e.editFormFields,model:e.editModel},on:{"on-submit":e.handleSave}})],1)],1)},i=[],o=(a("7f7f"),a("8e44")),s=o["a"]["curd"],d=s.getPageConfig,l=s.getList,u=s.add,r=s.edit,c=s.del,g=s.toBlack,h=s.toWhite,f={data:function(){return{loading:!0,tableLoading:!0,data:[],editModel:{},pageConfig:{},editDialogOpeon:!1,pageSize:10,pageNumber:1,total:0}},computed:{columns:function(){return this.pageConfig.columns},editFormFields:function(){return this.pageConfig.editFormFields}},mounted:function(){var e=this,t=this.$route.params.pageId;d({pageId:t}).then(function(t){e.pageConfig=t.data,e.loading=!1,e.getTableData()})},methods:{getTableData:function(){var e=this;this.tableLoading=!0;var t=this.$route.params.pageId,a={pageSize:this.pageSize,pageNumber:this.pageNumber,pageId:t};l(a).then(function(t){var a=t.data,n=a.list,i=a.pageSize,o=a.pageNumber,s=a.total;e.data=n||[],e.pageSize=i||e.pageSize,e.pageNumber=o||e.pageNumber,e.total=s||e.total,e.tableLoading=!1})},handlePageNumberChange:function(e){this.pageNumber=e,this.getTableData()},handlePageSizeChange:function(e){this.pageSize=e,this.getTableData()},handleCreateButtonClick:function(){this.editModel={type:"add",status:"1"},this.editDialogOpeon=!0},handleButtonEvent:function(e,t,a){this[e.name](t,a)},editButtonClick:function(e,t){this.editModel=e,this.editModel.index=t,this.editDialogOpeon=!0},deleteButtonClick:function(e){this.deleteRequest(e)},toBlackButtonClick:function(e){this.toBlackRequest(e)},toWhiteButtonClick:function(e){this.toWhiteRequest(e)},handleSave:function(){var e=this;this.$refs.FormGenerator.submit().then(function(){if("add"===e.editModel.type)return e.editModel.type="",e.addRequest(e.editModel),void e.getTableData();e.editRequest(e.editModel)}).catch(function(e){console.log(e)})},addRequest:function(e){var t=this;u(e).then(function(e){0===+e.status?(t.$Message.info("Add Success!"),t.editDialogOpeon=!1,t.getTableData()):t.$Message.error("Add Failed!")})},editRequest:function(e){var t=this;r(e).then(function(e){0===+e.status?(t.$Message.info("Edit Success!"),t.editDialogOpeon=!1,t.getTableData()):t.$Message.error("Edit Failed!")})},deleteRequest:function(e){var t=this;c(e).then(function(e){0===+e.status?(t.$Message.info("Delete Success!"),t.getTableData()):t.$Message.error("Delete Failed!")})},toBlackRequest:function(e){var t=this;g(e).then(function(e){0===+e.status?(t.$Message.info("ToBlack Success!"),t.getTableData()):t.$Message.error("ToBlack Failed!")})},toWhiteRequest:function(e){var t=this;h(e).then(function(e){0===+e.status?(t.$Message.info("toWhite Success!"),t.getTableData()):t.$Message.error("toWhite Failed!")})}}},p=f,m=(a("dabe"),a("2877")),b=Object(m["a"])(p,n,i,!1,null,null,null),v=b.exports;t["default"]=v},d7e3:function(e,t,a){},dabe:function(e,t,a){"use strict";var n=a("d7e3"),i=a.n(n);i.a}}]);
//# sourceMappingURL=curd.dd09b092.js.map