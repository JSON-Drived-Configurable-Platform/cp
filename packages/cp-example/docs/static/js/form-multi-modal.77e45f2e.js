(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["form-multi-modal"],{"0351":function(t,e,n){},"683f":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Table",{attrs:{loading:t.tableLoading,columns:t.columns,data:t.data},scopedSlots:t._u([{key:"action",fn:function(e){var a=e.row;return[n("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.handleEditButtonClick(a)}}},[t._v("编辑")])]}}])}),n("div",{staticClass:"page-form-modal-pagenation"},[n("Page",{attrs:{total:t.total,"show-total":""}})],1),n("div",{attrs:{id:"multi-modal-container"}})],1)},o=[],i=(n("7f7f"),n("8e44")),l=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{ref:"modal",attrs:{value:t.value,styles:t.styles,title:t.title,"footer-hide":"",draggable:""}},[n("FormGenerator",{ref:"FormGenerator",attrs:{fields:t.fields,model:t.model},on:{"on-submit":t.handleSave,"on-reset":t.handelReset}})],1)},d=[];function s(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t))+t}var u={props:{title:{type:String,default:""},fields:{type:Array,default:function(){return[]},required:!0},model:{type:Object,default:function(){return{}}}},data:function(){return{styles:{},value:!0}},mounted:function(){this.$refs.modal.dragData={x:s(0,700),y:s(100,200),dragX:0,dragY:0,dragging:!1}},methods:{handleEditClick:function(){this.value=!0},handleSave:function(){var t=this;this.$refs.FormGenerator.submit().then(function(e){console.log("update model",e),t.value=!1,t.$Message.info("update success!")}).catch(function(t){console.log("valid",t)})},handelReset:function(){}}},c=u,f=n("2877"),g=Object(f["a"])(c,r,d,!1,null,null,null),m=g.exports,p=i["a"]["form"],h=p.getPageConfig,v=p.getList;function b(t,e,n){l["default"].component("dynimicModal",{render:function(a){return a(m,{props:{fields:t,model:e,title:n}})}});var a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=l["default"].component("dynimicModal"),o=new a({props:{fields:t,model:e,title:n}}).$mount();document.getElementById("multi-modal-container").appendChild(o.$el)};a(t)}var y={data:function(){return{loading:!0,tableLoading:!0,data:[],editModel:{},pageConfig:{},pageSize:10,pageNumber:1,total:0,model:{}}},computed:{options:function(){return this.pageConfig.form.options},columns:function(){return this.pageConfig.columns},editFormFields:function(){return this.pageConfig.editFormFields}},mounted:function(){var t=this,e=this.$route.params.pageId;h({pageId:e}).then(function(e){t.pageConfig=e.data,t.loading=!1,t.getTableData()})},methods:{getTableData:function(){var t=this;this.tableLoading=!0;var e=this.$route.params.pageId,n={pageSize:this.pageSize,pageNumber:this.pageNumber,pageId:e};v(n).then(function(e){var n=e.data,a=n.list,o=n.pageSize,i=n.pageNumber,l=n.total;t.data=a||[],t.pageSize=o||t.pageSize,t.pageNumber=i||t.pageNumber,t.total=l||t.total,t.tableLoading=!1})},handleEditButtonClick:function(t,e){this.editModel=t,this.editModel.index=e,b(this.editFormFields,this.editModel,"编辑-".concat(this.editModel.name))},handleSave:function(){var t=this;this.$refs.FormGenerator.submit().then(function(e){console.log("update model",e),t.$Message.info("update success!")}).catch(function(t){console.log("valid",t)})},handleEditClick:function(){b(this.fields,{},"编辑")}}},M=y,C=(n("9fec"),Object(f["a"])(M,a,o,!1,null,null,null));e["default"]=C.exports},"9fec":function(t,e,n){"use strict";var a=n("0351"),o=n.n(a);o.a}}]);
//# sourceMappingURL=form-multi-modal.77e45f2e.js.map