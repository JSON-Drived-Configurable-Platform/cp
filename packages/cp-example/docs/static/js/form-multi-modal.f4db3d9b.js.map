{"version":3,"sources":["webpack:///./src/page/form/views/multi-modal.vue?d6d0","webpack:///./src/page/form/views/multi-modal-com.vue?5b78","webpack:///src/page/form/views/multi-modal-com.vue","webpack:///./src/page/form/views/multi-modal-com.vue?e2d1","webpack:///./src/page/form/views/multi-modal-com.vue","webpack:///src/page/form/views/multi-modal.vue","webpack:///./src/page/form/views/multi-modal.vue?6e81","webpack:///./src/page/form/views/multi-modal.vue","webpack:///./src/page/form/views/multi-modal.vue?238c"],"names":["_vm","this","_h","$createElement","_c","_self","attrs","tableLoading","columns","data","scopedSlots","_u","key","fn","ref","row","staticStyle","on","$event","handleEditButtonClick","_v","staticClass","total","staticRenderFns","value","styles","title","fields","model","handleSave","handelReset","getRandomInt","min","max","Math","ceil","floor","random","props","type","String","default","Array","required","Object","mounted","$refs","modal","dragData","x","y","dragX","dragY","dragging","methods","handleEditClick","FormGenerator","submit","generateModal","render","h","document","getElementById","appendChild","component","$el","modalGenerator","loading","editModel","pageConfig","pageSize","pageNumber","computed","options","form","editFormFields","getPageConfig","pageId","getTableData","getList","params","then","index"],"mappings":"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","file":"static/js/form-multi-modal.f4db3d9b.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Table',{attrs:{\"loading\":_vm.tableLoading,\"columns\":_vm.columns,\"data\":_vm.data},scopedSlots:_vm._u([{key:\"action\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('Button',{staticStyle:{\"margin-right\":\"5px\"},attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.handleEditButtonClick(row)}}},[_vm._v(\"编辑\")])]}}])}),_c('div',{staticClass:\"page-form-modal-pagenation\"},[_c('Page',{attrs:{\"total\":_vm.total,\"show-total\":\"\"}})],1),_c('div',{attrs:{\"id\":\"multi-modal-container\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Modal',{ref:\"modal\",attrs:{\"value\":_vm.value,\"styles\":_vm.styles,\"title\":_vm.title,\"footer-hide\":\"\",\"draggable\":\"\"}},[_c('FormGenerator',{ref:\"FormGenerator\",attrs:{\"fields\":_vm.fields,\"model\":_vm.model},on:{\"on-submit\":_vm.handleSave,\"on-reset\":_vm.handelReset}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <Modal\n    ref=\"modal\"\n    :value=\"value\"\n    :styles=\"styles\"\n    :title=\"title\"\n    footer-hide\n    draggable\n  >\n    <FormGenerator\n      ref=\"FormGenerator\"\n      :fields=\"fields\"\n      :model=\"model\"\n      @on-submit=\"handleSave\"\n      @on-reset=\"handelReset\"\n    />\n  </Modal>\n</template>\n\n<script>\nfunction getRandomInt(min, max) {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min)) + min; //不含最大值，含最小值\n}\nexport default {\n  props: {\n    title: {\n      type: String,\n      default: \"\"\n    },\n    fields: {\n      type: Array,\n      default() {\n        return [];\n      },\n      required: true\n    },\n    model: {\n      type: Object,\n      default() {\n        return {};\n      }\n    }\n  },\n  data() {\n    return {\n      styles: {},\n      value: true\n    };\n  },\n  mounted() {\n    this.$refs.modal.dragData = {\n      x: getRandomInt(0, 700),\n      y: getRandomInt(100, 200),\n      dragX: 0,\n      dragY: 0,\n      dragging: false\n    };\n  },\n  methods: {\n    handleEditClick() {\n      this.value = true;\n    },\n    handleSave() {\n      this.$refs.FormGenerator.submit()\n        .then(data => {\n          // eslint-disable-next-line no-console\n          console.log(\"update model\", data);\n          this.value = false;\n          this.$Message.info(\"update success!\");\n        })\n        .catch(valid => {\n          // eslint-disable-next-line no-console\n          console.log(\"valid\", valid);\n        });\n    },\n    handelReset() {}\n  }\n};\n</script>\n\n<style></style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./multi-modal-com.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./multi-modal-com.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./multi-modal-com.vue?vue&type=template&id=41a56626&\"\nimport script from \"./multi-modal-com.vue?vue&type=script&lang=js&\"\nexport * from \"./multi-modal-com.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div>\n    <Table :loading=\"tableLoading\" :columns=\"columns\" :data=\"data\">\n      <template slot-scope=\"{ row }\" slot=\"action\">\n        <Button\n          type=\"primary\"\n          size=\"small\"\n          style=\"margin-right: 5px\"\n          @click=\"handleEditButtonClick(row)\"\n          >编辑</Button\n        >\n      </template>\n    </Table>\n    <div class=\"page-form-modal-pagenation\">\n      <Page :total=\"total\" show-total />\n    </div>\n    <div id=\"multi-modal-container\"></div>\n  </div>\n</template>\n\n<script>\nimport services from \"@/service\";\nconst { getPageConfig, getList } = services[\"form\"];\nimport Vue from \"vue\";\nimport modalCom from \"./multi-modal-com.vue\";\nfunction generateModal(fields, model, title) {\n  Vue.component(\"dynimicModal\", {\n    render(h) {\n      return h(modalCom, {\n        props: {\n          fields,\n          model,\n          title\n        }\n      });\n    }\n  });\n\n  const modalGenerator = (fields = [], model = {}, title = \"\") => {\n    const dynimicModal = Vue.component(\"dynimicModal\");\n    const component = new dynimicModal({\n      props: {\n        fields,\n        model,\n        title\n      }\n    }).$mount();\n    document.getElementById(\"multi-modal-container\").appendChild(component.$el);\n  };\n  modalGenerator(fields);\n}\nexport default {\n  data() {\n    return {\n      loading: true,\n      tableLoading: true,\n      data: [],\n      editModel: {},\n      pageConfig: {},\n      pageSize: 10,\n      pageNumber: 1,\n      total: 0,\n      model: {}\n    };\n  },\n  computed: {\n    options() {\n      return this.pageConfig.form.options;\n    },\n    columns() {\n      return this.pageConfig.columns;\n    },\n    editFormFields() {\n      return this.pageConfig.editFormFields;\n    }\n  },\n  mounted() {\n    const { pageId } = this.$route.params;\n    getPageConfig({\n      pageId\n    }).then(res => {\n      this.pageConfig = res.data;\n      this.loading = false;\n      this.getTableData();\n    });\n  },\n  methods: {\n    getTableData() {\n      this.tableLoading = true;\n      const { pageId } = this.$route.params;\n      const params = {\n        pageSize: this.pageSize,\n        pageNumber: this.pageNumber,\n        pageId\n      };\n      getList(params).then(res => {\n        const { list, pageSize, pageNumber, total } = res.data;\n        this.data = list || [];\n        this.pageSize = pageSize || this.pageSize;\n        this.pageNumber = pageNumber || this.pageNumber;\n        this.total = total || this.total;\n        this.tableLoading = false;\n      });\n    },\n    handleEditButtonClick(row, index) {\n      // eslint-disable-next-line no-console\n      this.editModel = row;\n      this.editModel.index = index;\n      generateModal(\n        this.editFormFields,\n        this.editModel,\n        `编辑-${this.editModel.name}`\n      );\n    },\n    handleSave() {\n      this.$refs.FormGenerator.submit()\n        .then(data => {\n          // eslint-disable-next-line no-console\n          console.log(\"update model\", data);\n          this.$Message.info(\"update success!\");\n        })\n        .catch(valid => {\n          // eslint-disable-next-line no-console\n          console.log(\"valid\", valid);\n        });\n    },\n    handleEditClick() {\n      generateModal(this.fields, {}, \"编辑\");\n    }\n  }\n};\n</script>\n\n<style lang=\"less\">\n.page-form-modal {\n  &-pagenation {\n    margin-top: 20px;\n    text-align: right;\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./multi-modal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./multi-modal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./multi-modal.vue?vue&type=template&id=ca5960b2&\"\nimport script from \"./multi-modal.vue?vue&type=script&lang=js&\"\nexport * from \"./multi-modal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./multi-modal.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./multi-modal.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./multi-modal.vue?vue&type=style&index=0&lang=less&\""],"sourceRoot":""}