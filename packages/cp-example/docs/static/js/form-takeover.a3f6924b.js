(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["form-takeover"],{"38b0":function(t,e,n){},"9aed":function(t,e,n){"use strict";var r=n("38b0"),a=n.n(r);a.a},a40d:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Steps",{staticStyle:{"margin-left":"13%"},attrs:{current:t.current}},t._l(t.data,function(t,e){return n("Step",{key:e,attrs:{title:t.name}})}),1),0===this.current?[n("div",{staticClass:"page-form-takeover-form",staticStyle:{margin:"30px auto",width:"760px"}},[n("FormGenerator",{ref:"FormGenerator",attrs:{fields:t.fieldsData[0],model:t.model},on:{"on-submit":t.handleSave,"on-button-event":function(e){return t.handelButtonEvent(e)}}})],1)]:t._e(),1===this.current?[n("div",{staticClass:"page-form-takeover-form",staticStyle:{margin:"30px auto",width:"760px"}},[n("FormGenerator",{ref:"FormGenerator",attrs:{fields:t.fieldsData[1],model:t.model},on:{"on-submit":t.handleSave,"on-button-event":function(e){return t.handelButtonEvent(e)}}})],1)]:t._e(),2===this.current?[n("div",{staticClass:"page-form-takeover-form",staticStyle:{margin:"30px auto",width:"760px"}},[n("FormGenerator",{ref:"FormGenerator",attrs:{fields:t.fieldsData[2],model:t.model},on:{"on-submit":t.handleSave,"on-button-event":function(e){return t.handelButtonEvent(e)}}})],1)]:t._e()],2)},a=[],o=(n("ac6a"),n("456d"),n("7f7f"),n("c5f6"),n("8e44")),i=o["a"]["form"],u=i.getTakeoverFormData,s=i.getTakeoverModel,d=i.getList,c={data:function(){return{current:Number(this.$route.query.inx)||0,model:{},diffData:{},pageConfig:[],data:[{name:"第一步",value:"1"},{name:"第二步",value:"2"},{name:"第三步",value:"3"}]}},computed:{fieldsData:function(){return this.pageConfig&&this.pageConfig||[]}},mounted:function(){this.handTakeoverData(),this.$router.push({query:{type:"add",inx:this.current}})},methods:{handTakeoverData:function(){var t=this;u().then(function(e){"ok"===e.msg&&(t.pageConfig=e.data.fields)})},handTakeoverModel:function(){var t=this;s().then(function(e){"ok"===e.msg&&(t.model=e.data.modelData)})},handelButtonEvent:function(t){this[t.name]()},prev:function(){0!==this.current?(this.current-=1,this.$router.push({query:{type:this.$route.query.type,inx:this.current}})):this.current=0,0===Object.keys(this.model).length&&0!==this.current&&this.handTakeoverModel()},next:function(){2!==this.current&&(this.handleSave(),this.valid&&(this.current+=1))},handleSave:function(){var t=this;this.$refs.FormGenerator.submit().then(function(e){console.log("update model",e),t.value=!1;var n={};for(var r in t.pageConfig[t.current].map(function(t){n[t.model]=""}),n)n[r]=t.model[r];t.getFormData(n)}).catch(function(e){t.valid=e,console.log("valid",e)})},getFormData:function(t){var e=this;d(t).then(function(t){2!==e.current&&"ok"===t.msg&&(e.current+=1,e.$router.push({query:{type:e.$route.query.type,inx:e.current}}))})}}},l=c,f=(n("9aed"),n("2877")),h=Object(f["a"])(l,r,a,!1,null,null,null);e["default"]=h.exports}}]);
//# sourceMappingURL=form-takeover.a3f6924b.js.map