{"version":3,"sources":["webpack:///./src/page/form/views/wizard.vue?c1a6","webpack:///src/page/form/views/wizard.vue","webpack:///./src/page/form/views/wizard.vue?9e5c","webpack:///./src/page/form/views/wizard.vue","webpack:///./src/page/form/views/wizard.vue?1bc7"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","current","on","$event","handelTab","ref","fieldsData","model","handleSave","handelButtonEvent","staticRenderFns","data","Number","$route","query","inx","valid","pageConfig","diffData","computed","mounted","handTakeoverData","handTakeoverModel","$router","push","type","methods","console","log","ev","getWizardFormData","then","res","msg","getTakeoverModel","e","name","prev","next","$refs","FormGenerator","submit","Array","isArray","k","join","obj","getList","deepClone","objClone","component"],"mappings":"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","file":"static/js/form-wizard.3932f4c4.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wizard\"},[_c('Steps',{attrs:{\"current\":_vm.current,\"direction\":\"vertical\"}},[_c('div',{staticClass:\"wizard-name\",on:{\"click\":function($event){return _vm.handelTab('0')}}},[_c('Step',{attrs:{\"title\":\"项目一\",\"content\":\"这里是该步骤的描述信息\"}})],1),_c('div',{staticClass:\"wizard-name\",on:{\"click\":function($event){return _vm.handelTab('1')}}},[_c('Step',{attrs:{\"title\":\"项目二\",\"content\":\"这里是该步骤的描述信息\"}})],1),_c('div',{staticClass:\"wizard-name\",on:{\"click\":function($event){return _vm.handelTab('2')}}},[_c('Step',{attrs:{\"title\":\"项目三\",\"content\":\"这里是该步骤的描述信息\"}})],1)]),[_c('div',{staticClass:\"page-form-takeover-form\"},[_c('FormGenerator',{ref:\"FormGenerator\",attrs:{\"fields\":_vm.fieldsData,\"model\":_vm.model},on:{\"on-submit\":_vm.handleSave,\"on-button-event\":function($event){return _vm.handelButtonEvent($event)}}})],1)]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"wizard\">\n    <Steps :current=\"current\" direction=\"vertical\">\n      <div class=\"wizard-name\" @click=\"handelTab('0')\">\n        <Step title=\"项目一\" content=\"这里是该步骤的描述信息\"></Step>\n      </div>\n      <div class=\"wizard-name\" @click=\"handelTab('1')\">\n        <Step title=\"项目二\" content=\"这里是该步骤的描述信息\"></Step>\n      </div>\n      <div class=\"wizard-name\" @click=\"handelTab('2')\">\n        <Step title=\"项目三\" content=\"这里是该步骤的描述信息\"></Step>\n      </div>\n    </Steps>\n    <template>\n      <div class=\"page-form-takeover-form\">\n        <FormGenerator\n          ref=\"FormGenerator\"\n          :fields=\"fieldsData\"\n          :model=\"model\"\n          @on-submit=\"handleSave\"\n          @on-button-event=\"handelButtonEvent($event)\"\n        />\n      </div>\n    </template>\n    <!-- <div style=\"width: 18%; margin:0 auto;\">\n        <Button type=\"primary\" @click=\"handLast\" style=\"margin-right:20px\">上一步</Button>\n        <Button type=\"primary\" @click=\"handeNext\" v-if=\"current === 0 || current === 1\" style=\"margin-right:20px\">下一步</Button>\n        <Button type=\"primary\" v-if=\"current === 2\" @click=\"handSub\" >提交</Button>\n    </div> -->\n  </div>\n</template>\n\n<script>\nimport services from \"@/service\";\nconst { getWizardFormData, getTakeoverModel, getList } = services[\"form\"];\nexport default {\n  data() {\n    return {\n      current: Number(this.$route.query.inx) || 0,\n      model: {},\n      valid: true,\n      pageConfig: [],\n      diffData: {},\n      data: [\n        {\n          name: \"第一步\",\n          value: \"1\"\n        },\n        {\n          name: \"第二步\",\n          value: \"2\"\n        },\n        {\n          name: \"第三步\",\n          value: \"3\"\n        }\n      ]\n    };\n  },\n  computed: {\n    fieldsData() {\n      if (this.pageConfig) {\n        return this.pageConfig[this.current] || [];\n      }\n      return [];\n    }\n  },\n  mounted() {\n    this.handTakeoverData();\n    this.handTakeoverModel();\n    this.$router.push({\n      query: {\n        type: \"add\",\n        inx: this.current\n      }\n    });\n  },\n  methods: {\n    handelTab(ev) {\n      console.log(ev);\n      this.current = Number(ev);\n      this.$router.push({\n        query: {\n          type: \"add\",\n          inx: Number(ev)\n        }\n      });\n    },\n    handTakeoverData() {\n      getWizardFormData().then(res => {\n        if (res.msg === \"ok\") {\n          this.pageConfig = res.data.fields;\n        }\n      });\n    },\n    handTakeoverModel() {\n      getTakeoverModel().then(res => {\n        if (res.msg === \"ok\") {\n          this.diffData = this.deepClone(res.data.modelData);\n          this.model = res.data.modelData;\n        }\n      });\n    },\n    handelButtonEvent(e) {\n      this[e.name]();\n    },\n    prev() {\n      if (this.current !== 0) {\n        this.current -= 1;\n        this.$router.push({\n          query: {\n            type: this.$route.query.type,\n            inx: this.current\n          }\n        });\n      } else {\n        this.current = 0;\n      }\n    },\n    next() {\n      if (this.current !== 2) {\n        this.$refs.FormGenerator.submit()\n          .then(data => {\n            // eslint-disable-next-line no-console\n            console.log(\"update model\", data);\n            this.value = false;\n          })\n          .catch(valid => {\n            // eslint-disable-next-line no-console\n            this.valid = valid;\n            console.log(\"valid\", valid);\n          });\n        if (this.valid) {\n          this.current += 1;\n          this.$router.push({\n            query: {\n              type: this.$route.query.type,\n              inx: this.current\n            }\n          });\n        }\n      }\n    },\n    handleSave() {\n      let obj = {};\n      for (let k in this.model) {\n        if (Array.isArray(this.model[k]) || Array.isArray(this.diffData[k])) {\n          if (this.model[k].join(\",\") !== this.diffData[k].join(\",\")) {\n            obj[k] = this.model[k];\n          }\n        } else {\n          if (this.model[k] !== this.diffData[k]) {\n            obj[k] = this.model[k];\n          }\n        }\n      }\n      getList(obj).then(res => {\n        console.log(res);\n      });\n    },\n    deepClone(obj) {\n      let _obj = JSON.stringify(obj),\n        objClone = JSON.parse(_obj);\n      return objClone;\n    }\n  }\n};\n</script>\n<style lang=\"less\">\n.wizard {\n  &-name {\n    cursor: pointer;\n  }\n  .ivu-steps {\n    width: 200px;\n    float: left !important;\n  }\n  .page-form-takeover-form {\n    margin: 30px auto;\n    width: 500px;\n  }\n  .page-form-simple-form {\n    float: left;\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./wizard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./wizard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./wizard.vue?vue&type=template&id=2506a081&\"\nimport script from \"./wizard.vue?vue&type=script&lang=js&\"\nexport * from \"./wizard.vue?vue&type=script&lang=js&\"\nimport style0 from \"./wizard.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./wizard.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./wizard.vue?vue&type=style&index=0&lang=less&\""],"sourceRoot":""}