(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{195:function(e,n,t){var o=t(209);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,t(15).default)("3ea83e81",o,!0,{})},196:function(e,n,t){var o=t(211);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,t(15).default)("81bb6994",o,!0,{})},208:function(e,n,t){"use strict";var o=t(195);t.n(o).a},209:function(e,n,t){(e.exports=t(14)(!1)).push([e.i,"\n.i-code[data-v-19189fba] {\n    margin: 0 0 10px 0;\n}\ndiv[data-v-19189fba]{\n     position: relative;\n     font-size: 14px;\n}\nspan.copy[data-v-19189fba], span.scale[data-v-19189fba], span.open-fiddle[data-v-19189fba]{\n     border-radius: 0 0 3px 3px;\n     padding: 2px 5px;\n     position: absolute;\n     top: 5px;\n     right: 0;\n     color: #b2b2b2;\n     cursor: pointer;\n}\nspan.scale[data-v-19189fba]{\n     right: 25px;\n}\nspan.open-fiddle[data-v-19189fba]{\n     right: 50px;\n}\n.bg + span.copy[data-v-19189fba]{\n     right: 5px;\n}\nspan.copy[data-v-19189fba]:hover, span.scale[data-v-19189fba]:hover, span.open-fiddle[data-v-19189fba]:hover{\n     color: #5c6b77;\n}\n\n",""])},210:function(e,n,t){"use strict";var o=t(196);t.n(o).a},211:function(e,n,t){(e.exports=t(14)(!1)).push([e.i,"\n.code-scale-modal .ivu-modal-body{\n    background-color: #f7f7f7;\n}\n.code-scale-modal pre{\n    font-size: 14px;\n}\n",""])},212:function(e,n,t){"use strict";t(216),t(217),t(214),t(197);var o=t(218),i=t.n(o),a=(t(219),t(220)),s=t.n(a),l={props:{lang:{type:String,default:"javascript"},bg:{type:Boolean,default:!1}},data:function(){return{openScale:!1,code:"",copied:!1,docLang:this.$lang,title:"Code"}},computed:{language:function(){return"auto"==this.lang?"":this.lang}},mounted:function(){this.code=this.$refs.code.innerHTML.replace(/\n/,""),this.$refs.code.innerHTML=this.code,i.a.highlightBlock(this.$refs.code),this.$refs.code2.innerHTML=this.code,i.a.highlightBlock(this.$refs.code2);var e=this.$parent.$parent.$parent;"Demo"===e.$options.name&&(this.title=e.title)},methods:{clip:function(){var e=this,n=this.code.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"),t=new s.a(".copy",{text:function(){return n}});t.on("success",function(n){n.clearSelection(),t.destroy(),e.copied=!0,"zh-CN"===e.docLang?e.$Message.success("代码已复制到剪贴板"):e.$Message.success("Code copied"),setTimeout(function(){e.copied=!1},2e3)})},scale:function(){this.openScale=!0},getSource:function(e,n){var t=new RegExp("<"+n+"[^>]*>"),o=e.match(t);return o?(o=o[0],e.slice(e.indexOf(o)+o.length,e.lastIndexOf("</"+n+">"))):""},openFiddle:function(){}}},r=(t(208),t(210),t(0)),c=Object(r.a)(l,function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"i-code"},[t("pre",{class:{bg:e.bg}},[t("code",{ref:"code",class:e.language},[e._t("default")],2)]),e._v(" "),t("span",{staticClass:"scale",on:{click:e.scale}},[t("Tooltip",{attrs:{content:e.$t("index.code_fullscreen"),placement:"top",transfer:""}},[t("Icon",{attrs:{type:"md-qr-scanner",size:"18"}})],1)],1),e._v(" "),t("span",{staticClass:"copy",on:{click:e.clip}},[t("Tooltip",{attrs:{content:e.$t("index.code_copy"),placement:"top",transfer:""}},[t("Icon",{directives:[{name:"show",rawName:"v-show",value:!e.copied,expression:"!copied"}],attrs:{type:"md-copy",size:"18"}}),e._v(" "),t("Icon",{directives:[{name:"show",rawName:"v-show",value:e.copied,expression:"copied"}],staticStyle:{color:"#5cb85c"},attrs:{type:"md-checkmark",size:"18"}})],1)],1),e._v(" "),t("Modal",{attrs:{"class-name":"code-scale-modal",title:e.title,width:"65"},model:{value:e.openScale,callback:function(n){e.openScale=n},expression:"openScale"}},[t("pre",{class:{bg:e.bg}},[e._v("            "),t("code",{ref:"code2",class:e.language}),e._v("\n        ")])])],1)},[],!1,null,"19189fba",null);n.a=c.exports},215:function(e,n,t){var o=t(223);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,t(15).default)("ef5e7348",o,!0,{})},222:function(e,n,t){"use strict";var o=t(215);t.n(o).a},223:function(e,n,t){(e.exports=t(14)(!1)).push([e.i,".example {\n  border: 1px solid #eee;\n  border-radius: 6px;\n  margin-bottom: 20px;\n  position: relative;\n  transition: all 0.2s ease-in-out;\n}\n.example:hover {\n  box-shadow: 0 2px 7px rgba(0, 0, 0, 0.15);\n  border-color: transparent;\n  position: relative;\n}\n.example-split {\n  display: block;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 42%;\n  border: 1px dashed #eee;\n}\n.example-vertical .example-split {\n  width: 100%;\n  float: left;\n  position: relative;\n  left: 0;\n}\n.example-demo {\n  padding: 20px 0;\n  position: relative;\n}\n.example-case {\n  padding: 0 20px;\n}\n.example-header {\n  font-weight: 500;\n  margin: 30px 0 10px;\n  position: relative;\n}\n.example-header span {\n  display: inline-block;\n  background: #fff;\n  padding: 0 5px 0 18px;\n  position: relative;\n  margin-left: 30px;\n  font-size: 14px;\n}\n.example-header span a {\n  opacity: 0;\n  transition: opacity 0.2s ease-in-out;\n}\n.example-header:hover span a {\n  opacity: 1;\n}\n.example-header:before {\n  content: '';\n  display: block;\n  width: 100%;\n  height: 1px;\n  background: #eee;\n  position: absolute;\n  top: 10px;\n  left: 0;\n}\n.example-desc {\n  font-size: 12px;\n  padding: 0 20px;\n}\n.example-desc p {\n  font-size: 12px !important;\n  text-align: justify;\n}\n.example-desc ul li {\n  font-size: 12px !important;\n}\n.example-desc blockquote {\n  font-size: 12px !important;\n}\n.example-code {\n  padding: 0 10px;\n  position: relative;\n  overflow: hidden;\n  transition: height 0.2s ease-in-out;\n}\n.example-code-more {\n  position: absolute;\n  bottom: 0;\n  left: 4px;\n  right: 4px;\n  text-align: center;\n  cursor: pointer;\n  padding: 5px 0;\n  /*transition: background .1s ease-in-out;*/\n}\n.example-code-more:after {\n  content: '';\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  z-index: 1;\n  box-shadow: 0 -15px 30px #fff inset;\n}\n.example-code-more i {\n  position: relative;\n  top: 5px;\n  z-index: 2;\n}\n.example-code-more .ivu-btn {\n  padding: 0 0 4px;\n  position: relative;\n  top: 4px;\n  z-index: 2;\n}\n.example-code-more:hover {\n  /*background: #fff;*/\n}\n.example-code-more:hover i {\n  color: #5cb85c;\n}\n",""])},224:function(e,n,t){"use strict";t(197);var o=t(225),i={name:"Demo",props:{title:{type:String,default:""},vertical:{type:Boolean,default:!1},hideCode:{type:Boolean,default:!1}},data:function(){return{showCode:!1,showMore:!0,demo_height:0,code_height:0,ready:!1,lang:this.$lang}},computed:{isCodeHide:function(){return this.hideCode},isVertical:function(){return this.vertical},codeHeight:function(){var e={};return this.ready&&(this.showCode?e.height=this.code_height+"px":e.height=this.demo_height+"px"),e},style:function(){var e={opacity:1};return this.isCodeHide&&!this.showCode&&(e.opacity=0),e},title_link:function(){return o.a.getFirstLetter(this.title).replace(/\s/g,"_")}},watch:{settingCode:function(){this.showCode=!1,this.showMore=!0,this.ready=!1,this.init()}},mounted:function(){this.init()},methods:{init:function(){var e=this;this.$nextTick(function(){var n=e.$children[0].$children[0].$el.clientHeight,t=e.$children[0].$children[1].$el.clientHeight+20;e.code_height=t,t<=n&&!e.isCodeHide&&(e.showMore=!1),e.demo_height=e.isCodeHide?30:n,e.ready=!0})}}},a=(t(222),t(0)),s=Object(a.a)(i,function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("Row",{staticClass:"example",class:{"example-vertical":e.isVertical},attrs:{id:e.title_link}},[t("i-col",{staticClass:"example-demo",attrs:{span:e.isVertical?24:10}},[t("div",{staticClass:"example-case"},[e._t("demo")],2),e._v(" "),t("header",{staticClass:"example-header"},[t("span",[e._v("\n                "+e._s(e.title)+"\n                "),t("a",{attrs:{href:"#"+e.title_link,"data-title":e.title}},[e._v("#")])])]),e._v(" "),t("div",{staticClass:"example-desc"},[e._t("desc")],2)]),e._v(" "),t("div",{staticClass:"example-split"}),e._v(" "),t("i-col",{staticClass:"example-code",style:e.codeHeight,attrs:{span:e.isVertical?24:14}},[t("div",{style:e.style},[e._t("code")],2),e._v(" "),e.showMore?t("div",{staticClass:"example-code-more",on:{click:function(n){e.showCode=!e.showCode}}},[t("Icon",{directives:[{name:"show",rawName:"v-show",value:!e.showCode,expression:"!showCode"}],attrs:{type:"ios-arrow-down"}}),e._v(" "),t("Icon",{directives:[{name:"show",rawName:"v-show",value:e.showCode,expression:"showCode"}],attrs:{type:"ios-arrow-up"}}),e._v(" "),t("i-button",{directives:[{name:"show",rawName:"v-show",value:e.isCodeHide&&!e.showCode,expression:"isCodeHide && !showCode"}],attrs:{type:"text"}},["zh-CN"===e.lang?[e._v("显示代码")]:[e._v("Show Code")]],2)],1):e._e()])],1)},[],!1,null,null,null);n.a=s.exports},240:function(e,n,t){var o=t(307);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,t(15).default)("367e9693",o,!0,{})},306:function(e,n,t){"use strict";var o=t(240);t.n(o).a},307:function(e,n,t){(e.exports=t(14)(!1)).push([e.i,".img-list[data-v-7d0c65b2] {\n  margin: 20px auto;\n}\n.img-list ul[data-v-7d0c65b2] {\n  display: flex;\n  align-items: flex-start;\n  justify-content: center;\n}\n.img-list ul li[data-v-7d0c65b2] {\n  margin: 0 50px;\n  text-align: center;\n}\n.img-list ul li img[data-v-7d0c65b2] {\n  margin: 0 auto;\n  display: block;\n  width: 100%;\n}\n.img-list ul li span[data-v-7d0c65b2] {\n  display: inline-block;\n  line-height: 30px;\n  font-size: 12px;\n}\n",""])},337:function(e,n,t){"use strict";t.r(n);var o=t(206),i=t(207),a=t(224),s=t(212),l={},r={type:"Select",model:"city",remote:!0,options:"/selectApi"},c={type:"Select",model:"cities",remote:!0,multiple:!0,options:"/selectApi"},d={city:"Beijing",cities:["Beijing","Shanghai"]};l.data={field:r,multipleField:c,model:d},l.code="\n<script>\nexport default {\n    data() {\n        return {\n            field: "+JSON.stringify(r)+",\n            multipleField: "+JSON.stringify(c)+",\n            model: "+JSON.stringify(d)+'\n        };\n    }\n};\n<script>\n<template>\n    <Form :model="model">\n        <FieldGenerator\n            :field="field"\n        />\n        <FieldGenerator\n            :field="multipleField"\n        />\n    </Form>\n</template>\n';var p={remote:l},h={components:{iArticle:o.a,inAnchor:i.a,Demo:a.a,iCode:s.a},data:function(){return{code:p}},methods:{handleFieldChange:function(e,n){console.log(e,n)}}},u=(t(306),t(0)),m=Object(u.a)(h,function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("i-article",[t("article",[t("h1",[e._v("数据通信")]),e._v(" "),t("p",[e._v("CP中数据的通信，主要包含两部分：")]),e._v(" "),t("ul",[t("li",[e._v("（1）、需要在页面或者模板代码中直接使用的数据服务;")]),e._v(" "),t("li",[e._v("（2）、在模板的JSON配置中隐式调用的数据服务；")])]),e._v(" "),t("inAnchor",{attrs:{title:"服务注册",h2:""}}),e._v(" "),t("p",[e._v("直接使用的数据服务，通常都维护在以service.js命名的文件中。这样做是为了代码易读，你也可以直接使用axios发送请求。如下代码注册了一个数据请求：")]),e._v(" "),t("i-code",[t("pre",[e._v("\nconst getHomeData = (params = {}) => {\n    return {\n        url: '/home/home-data',\n        method: 'get',\n        params\n    };\n};\n\nexport default {\n    getHomeData\n};\n                ")])]),e._v(" "),t("p",[e._v("然后在业务中就可以，如下使用注册的服务：")]),e._v(" "),t("i-code",[t("pre",[e._v("\n...\nconst { getHomeData } = service.home;\n...\ngetHomeData().then(res => {\n    ...\n});\n                ")])]),e._v(" "),t("inAnchor",{attrs:{title:"JSON配置的数据服务",h2:""}}),e._v(" "),t("p",[e._v("\n                在表单、图表等基础工具中，有很多功能需要在模块内部直接调用接口。\n                比如表单工具的下拉选择、图表工具的数据，都支持配置一个接口，就可以直接获取到对应的数据。\n            ")]),e._v(" "),t("Demo",{attrs:{title:"远程搜索的下拉选择表单"}},[t("div",{attrs:{slot:"demo"},slot:"demo"},[t("Form",{attrs:{model:e.code.remote.data.model}},[t("FieldGenerator",{attrs:{field:e.code.remote.data.field,"form-model":e.code.remote.data.model},on:{"on-field-change":e.handleFieldChange}}),e._v(" "),t("FieldGenerator",{attrs:{field:e.code.remote.data.multipleField,"form-model":e.code.remote.data.model},on:{"on-field-change":e.handleFieldChange}})],1)],1),e._v(" "),t("div",{attrs:{slot:"desc"},slot:"desc"},[t("p",[e._v("设置"),t("code",[e._v("field.remote")]),e._v("为true后，可以根据输入进行远程搜索。")]),e._v(" "),t("p",[e._v("此项值依赖"),t("code",[e._v("field.options")]),e._v("为获取数据的url。如果为数组，则无效")])]),e._v(" "),t("i-code",{attrs:{slot:"code",lang:"html"},slot:"code"},[e._v(e._s(e.code.remote.code))])],1),e._v(" "),t("p",[e._v("上例展示了，通过将select组件配置中的option设置为接口API，从而可以直接从后端拿到对应的选择项。")]),e._v(" "),t("inAnchor",{attrs:{title:"配置请求的拦截",h2:""}}),e._v(" "),t("p",[e._v("CP模块中配置的请求，在实际项目中可能需要对请求进行干预，比如本地调试、接口代理，还有后端返回的数据不能需要进行转换才符合组件配置的格式。")]),e._v(" "),t("p",[e._v("cp支持通过设置请求拦截器对配置请求进行拦截处理。如下代码对表单工具在全局设置了一个请求拦截器。")]),e._v(" "),t("i-code",[t("pre",[e._v("\nconst requestInterceptor = function (method = 'get', url, params) {\n    return new Promise((resolve, reject) => {\n        // eslint-disable-next-line no-undef\n        if (process.env.NODE_ENV === 'production') {\n            url = `website-data-api/${url}.json`;\n        }\n        axios.request({\n            url,\n            method,\n            params\n        }).then(res => {\n            resolve(res.data);\n        }).catch(error => {\n            reject(error);\n        });\n    });\n};\nVue.use(FormGenerator, {\n    requestInterceptor\n});\n                ")])]),e._v(" "),t("p",[e._v("\n                也可以对工具设置局部拦截器，比如表单工具详见：\n                "),t("a",{attrs:{href:"https://json-drived-configurable-platform.github.io/form-generator-iview/#/doc/FormGenerator"}},[e._v("表单配置requestInterceptor")])])],1)])},[],!1,null,"7d0c65b2",null);n.default=m.exports}}]);